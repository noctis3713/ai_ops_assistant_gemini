@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-terminal-bg text-terminal-text-primary min-h-screen font-sans;
    line-height: 1.6;
    margin: 0;
  }

  /* 語言特定字體設定 */
  /* 中文內容使用思源宋體，英文內容使用 Lora */
  :lang(zh-TW), :lang(zh-CN), :lang(zh) {
    font-family: 'Source Han Serif TC', serif;
  }

  :lang(en) {
    font-family: 'Lora', serif;
  }

  /* 針對混合語言內容的優化 */
  * {
    font-family: 'Source Han Serif TC', 'Lora', serif;
  }
  
  /* 統一的文字層級 */
  h1 {
    @apply text-terminal-primary font-semibold;
  }
  
  h2 {
    @apply text-terminal-text-primary font-semibold;
  }
  
  h3 {
    @apply text-terminal-text-primary font-medium;
  }
  
  label {
    @apply text-gray-700 font-medium;
  }
  
  p {
    @apply text-terminal-text-secondary;
  }
}

@layer components {
  /* 按鈕樣式系統 */
  .btn-primary {
    @apply text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 disabled:bg-gray-400 disabled:opacity-60 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-terminal-primary-light;
    background: linear-gradient(135deg, #0066cc 0%, #004a99 100%);
    box-shadow: 
      0 2px 4px rgba(0, 102, 204, 0.2),
      0 4px 8px rgba(0, 102, 204, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(0, 102, 204, 0.3);
    transform: translateY(0);
  }
  
  .btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #0056b3 0%, #003875 100%);
    box-shadow: 
      0 4px 8px rgba(0, 102, 204, 0.4),
      0 8px 16px rgba(0, 102, 204, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    transform: translateY(-1.3px);
  }
  
  .btn-primary:active:not(:disabled) {
    background: linear-gradient(135deg, #004494 0%, #002a5c 100%);
    box-shadow: 
      0 1px 2px rgba(0, 102, 204, 0.3),
      inset 0 2px 4px rgba(0, 0, 0, 0.2);
    transform: translateY(0);
  }
  
  .btn-secondary {
    @apply bg-terminal-error hover:bg-terminal-error-dark text-white font-medium py-2 px-4 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-terminal-error-light;
  }
  
  .btn-small {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-1 px-3 rounded text-sm transition-all duration-300 focus:outline-none focus:ring-1 focus:ring-gray-300;
  }
  
  .btn-ghost {
    @apply text-terminal-primary hover:text-terminal-primary-hover hover:bg-terminal-primary-light font-medium py-2 px-3 rounded transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-terminal-primary-light;
  }
  
  /* 表單元素樣式 */
  .form-input {
    @apply w-full p-3 bg-terminal-bg-card border border-gray-300 rounded-lg text-terminal-text-primary placeholder-terminal-text-muted focus:outline-none focus:border-terminal-primary focus:ring-2 focus:ring-terminal-primary-light transition-all duration-200;
    position: relative;
    z-index: 3;
  }
  
  .form-input:focus {
    @apply form-input-glow;
  }
  
  .form-select {
    @apply w-full p-3 bg-terminal-bg-card border border-gray-300 rounded-lg text-terminal-text-primary focus:outline-none focus:border-terminal-primary focus:ring-2 focus:ring-terminal-primary-light transition-all duration-200;
    position: relative;
    z-index: 3;
  }
  
  .form-select:focus {
    @apply form-select-glow;
  }
  
  /* 狀態顯示樣式 */
  .status-loading {
    @apply bg-terminal-primary-light text-terminal-primary px-4 py-3 rounded-lg font-medium text-center animate-pulse border border-terminal-primary/20;
  }
  
  .status-error {
    @apply bg-terminal-error-light text-terminal-error-dark border border-terminal-error/30 px-4 py-3 rounded-lg font-medium text-center;
  }
  
  .status-success {
    @apply bg-terminal-success-light text-terminal-success-dark border border-terminal-success/30 px-4 py-3 rounded-lg font-medium text-center;
  }
  
  .status-warning {
    @apply bg-terminal-warning-light text-terminal-warning-dark border border-terminal-warning/30 px-4 py-3 rounded-lg font-medium text-center;
  }
  
  /* 輸出顯示樣式 */
  .output-display {
    @apply flex-1 bg-terminal-bg-card border border-gray-300 rounded-lg p-4 text-terminal-text-primary font-mono text-sm whitespace-pre-wrap overflow-y-auto min-h-[300px] leading-6 shadow-soft;
  }
  
  .output-display.error {
    @apply text-terminal-error border-terminal-error bg-terminal-error-light/50;
  }
  
  /* 進度條樣式 */
  .progress-bar {
    @apply w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-3;
  }
  
  .progress-fill {
    @apply h-full rounded-full;
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: left center;
  }
  
  .progress-fill.active {
    animation: progressPulse 2s ease-in-out infinite;
  }
  
  .progress-fill.success {
    background: linear-gradient(135deg, #198754 0%, #146c43 100%);
    animation: progressSuccess 0.8s ease-out;
  }
  
  .progress-fill.error {
    background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);
    animation: progressError 0.5s ease-out;
  }
  
  .progress-fill.warning {
    background: linear-gradient(135deg, #ffc107 0%, #997404 100%);
    animation: progressWarning 0.6s ease-out;
  }
  
  /* 階段文字切換動畫 */
  .stage-text {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: stageTextFadeIn 0.4s ease-out;
  }
  
  .stage-text.changing {
    animation: stageTextChange 0.6s ease-in-out;
  }
  
  /* 卡片樣式 */
  .card {
    @apply bg-terminal-bg-card border border-gray-200 rounded-lg shadow-card;
  }
  
  .card-header {
    @apply border-b border-gray-200 p-6;
  }
  
  .card-body {
    @apply p-6;
  }
  
  .card-footer {
    @apply border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg;
  }
  
  /* 標籤樣式 */
  .label-primary {
    @apply block mb-2 text-gray-700 font-medium;
  }
  
  .label-secondary {
    @apply text-terminal-text-secondary font-normal text-sm;
  }
  
  /* 結果樣式 */
  .batch-result-header {
    @apply flex items-center justify-between p-4 bg-gray-50 border-b border-gray-200;
  }
  
  .batch-result-content {
    @apply p-4;
  }
  
  .batch-stats-grid {
    @apply grid grid-cols-4 gap-4 text-sm;
  }
  
  .batch-stat-item {
    @apply text-center;
  }
  

  /* 展開/收起箭頭按鈕質感升級 */
  .expand-arrow-button {
    @apply w-6 h-6 rounded-md bg-gray-100 border border-gray-200 text-terminal-text-muted hover:text-terminal-text-primary hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center justify-center text-xs;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }
  
  .expand-arrow-button:hover {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transform: translateY(-0.5px);
  }
  
  .expand-arrow-button:active {
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transform: translateY(0);
  }

  /* 複製按鈕質感升級 */
  .copy-button {
    @apply w-7 h-7 rounded-md bg-terminal-primary-light/10 border border-terminal-primary/20 text-terminal-primary hover:text-terminal-primary-hover hover:bg-terminal-primary-light/20 hover:border-terminal-primary/30 transition-all duration-200 flex items-center justify-center text-sm;
    box-shadow: 0 1px 2px rgba(0, 102, 204, 0.05);
  }

  .copy-button:hover {
    box-shadow: 0 2px 4px rgba(0, 102, 204, 0.15);
    transform: translateY(-0.5px);
  }

  .copy-button:active {
    box-shadow: 0 1px 2px rgba(0, 102, 204, 0.1);
    transform: translateY(0);
  }

  /* 模式按鈕發光效果樣式 */
  .mode-button-glow {
    animation: modeButtonGlowToMax 1s ease-in-out forwards;
  }

  /* 輸入框呼吸閃爍效果樣式 */
  .form-input-glow, .form-select-glow {
    animation: inputBreathingGlow 3s ease-in-out infinite;
  }

  /* 狀態提示動畫樣式 */
  .status-hint {
    @apply text-center text-terminal-text-muted transition-all duration-300;
  }
  
  .status-hint-flash {
    animation: statusHintFlash 2s ease-in-out infinite;
  }

  /* 狀態指示燈樣式 */
  .status-indicator-success {
    @apply w-3 h-3 rounded-full transition-all duration-300;
    background: linear-gradient(135deg, #198754 0%, #146c43 100%);
    box-shadow: 
      0 1px 3px rgba(25, 135, 84, 0.4),
      0 0 8px rgba(25, 135, 84, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    border: 1px solid rgba(25, 135, 84, 0.2);
  }

  .status-indicator-error {
    @apply w-3 h-3 rounded-full transition-all duration-300;
    background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);
    box-shadow: 
      0 1px 3px rgba(220, 53, 69, 0.4),
      0 0 8px rgba(220, 53, 69, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    border: 1px solid rgba(220, 53, 69, 0.2);
  }
}

/* 閃爍動畫定義 */
@keyframes statusHintFlash {
  0%, 100% {
    opacity: 0.5;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
}

/* 模式按鈕發光動畫定義 */
@keyframes modeButtonGlow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3), 0 0 10px rgba(0, 102, 204, 0.1);
  }
  50% {
    box-shadow: 0 0 10px rgba(0, 102, 204, 0.6), 0 0 20px rgba(0, 102, 204, 0.3), 0 0 30px rgba(0, 102, 204, 0.1);
  }
}

/* 按鈕漸變到最亮狀態動畫定義 */
@keyframes modeButtonGlowToMax {
  0% {
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3), 0 0 10px rgba(0, 102, 204, 0.1);
  }
  100% {
    box-shadow: 0 0 10px rgba(0, 102, 204, 0.6), 0 0 20px rgba(0, 102, 204, 0.3), 0 0 30px rgba(0, 102, 204, 0.1);
  }
}

/* 輸入框呼吸閃爍動畫定義 */
@keyframes inputBreathingGlow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3), 0 0 10px rgba(0, 102, 204, 0.1);
  }
  50% {
    box-shadow: 0 0 10px rgba(0, 102, 204, 0.6), 0 0 20px rgba(0, 102, 204, 0.3), 0 0 30px rgba(0, 102, 204, 0.1);
  }
}

/* 進度條動畫定義 */
@keyframes progressPulse {
  0%, 100% {
    opacity: 0.8;
    transform: scaleY(1);
  }
  50% {
    opacity: 1;
    transform: scaleY(1.1);
  }
}

@keyframes progressSuccess {
  0% {
    transform: scaleX(0.95);
    filter: brightness(1);
  }
  50% {
    transform: scaleX(1.02);
    filter: brightness(1.2);
  }
  100% {
    transform: scaleX(1);
    filter: brightness(1);
  }
}

@keyframes progressError {
  0% {
    transform: scaleY(1);
  }
  25% {
    transform: scaleY(1.2);
  }
  50% {
    transform: scaleY(0.8);
  }
  100% {
    transform: scaleY(1);
  }
}

@keyframes progressWarning {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.15);
  }
}

/* 階段文字動畫定義 */
@keyframes stageTextFadeIn {
  0% {
    opacity: 0;
    transform: translateY(-5px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes stageTextChange {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  50% {
    opacity: 0.3;
    transform: translateX(-5px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}
